-- Roblox-Compatible Brainrot Auto-Farmer
-- Safe for loadstring conversion

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TweenService = game:GetService("TweenService")

local Player = Players.LocalPlayer
local Character = Player.Character or Player.CharacterAdded:Wait()
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")

-- Configuration
local SETTINGS = {
    BasePosition = Vector3.new(100, 50, -30), -- SET YOUR BASE COORDINATES HERE
    CollectRange = 50,
    MovementSpeed = 32,
    Cooldown = 3
}

-- Find nearest brainrot part
local function findNearestBrainrot()
    local closestPart = nil
    local shortestDistance = SETTINGS.CollectRange

    for _, descendant in pairs(workspace:GetDescendants()) do
        if descendant:IsA("BasePart") and descendant.Name:find("Brainrot") then
            local distance = (HumanoidRootPart.Position - descendant.Position).Magnitude
            if distance < shortestDistance then
                closestPart = descendant
                shortestDistance = distance
            end
        end
    end

    return closestPart
end

-- Smooth movement to position
local function moveTo(position)
    HumanoidRootPart.Anchored = true
    local tweenInfo = TweenInfo.new(
        (HumanoidRootPart.Position - position).Magnitude / SETTINGS.MovementSpeed,
        Enum.EasingStyle.Linear
    )
    local tween = TweenService:Create(HumanoidRootPart, tweenInfo, {CFrame = CFrame.new(position)})
    
    tween:Play()
    tween.Completed:Wait()
    HumanoidRootPart.Anchored = false
end

-- Collect and redeem process
local function collectAndRedeem(target)
    -- Fire collection event
    local collectEvent = ReplicatedStorage:FindFirstChild("CollectItem")
    if collectEvent and collectEvent:IsA("RemoteEvent") then
        collectEvent:FireServer(target, HumanoidRootPart.Position)
    end

    -- Return to base
    moveTo(SETTINGS.BasePosition)

    -- Fire redeem event
    task.wait(0.5)
    local redeemEvent = ReplicatedStorage:FindFirstChild("RedeemItem")
    if redeemEvent and redeemEvent:IsA("RemoteEvent") then
        redeemEvent:FireServer("Brainrot")
    end
end

-- Main loop
while true do
    if Character and Character.Parent and HumanoidRootPart then
        local brainrot = findNearestBrainrot()
        if brainrot then
            collectAndRedeem(brainrot)
        end
    end
    task.wait(SETTINGS.Cooldown)
end
