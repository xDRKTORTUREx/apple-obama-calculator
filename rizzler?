--[[
    üöÄ Supreme Hub ‚Äî Unified Build
    Includes: ESP System, Auto Steal, GUI, Utility Features
]]

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local HttpService = game:GetService("HttpService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera

-- üß† ESP Settings
local ESP = {
    Enabled = true,
    Mode = "Name",
    Color = Color3.fromRGB(255, 0, 0),
    Distance = 5000
}

-- üõ∏ Auto Steal Settings
local AutoStealEnabled = true
local basePosition = Vector3.new(0, 5, 0) -- Replace with actual base coordinates

-- üé® GUI Setup
local ScreenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 480, 0, 400)
Frame.Position = UDim2.new(0.5, -240, 0.5, -200)
Frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Frame.Active = true
Frame.Draggable = true

local y = 20
local function createButton(text, callback)
    local btn = Instance.new("TextButton", Frame)
    btn.Size = UDim2.new(0, 460, 0, 35)
    btn.Position = UDim2.new(0, 10, 0, y)
    btn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Text = text
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 16
    btn.MouseButton1Click:Connect(callback)
    y += 40
end

local function notify(msg)
    local tip = Instance.new("TextLabel", ScreenGui)
    tip.Size = UDim2.new(0, 400, 0, 30)
    tip.Position = UDim2.new(0.5, -200, 0, 5)
    tip.BackgroundTransparency = 0.3
    tip.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    tip.TextColor3 = Color3.fromRGB(255, 255, 255)
    tip.Font = Enum.Font.Code
    tip.TextSize = 18
    tip.Text = "[Hub] " .. msg
    tip.ZIndex = 5
    task.delay(3, function() tip:Destroy() end)
end

-- üß† ESP Drawing
local drawings = {}
local function clearDrawings()
    for _, d in pairs(drawings) do d:Remove() end
    drawings = {}
end

local function drawESPForPlayer(player)
    if not ESP.Enabled or player == LocalPlayer then return end
    local char = player.Character
    if not char or not char:FindFirstChild("HumanoidRootPart") then return end

    local hrp = char.HumanoidRootPart
    local pos, onScreen = Camera:WorldToViewportPoint(hrp.Position)
    if not onScreen or (hrp.Position - Camera.CFrame.Position).Magnitude > ESP.Distance then return end

    if ESP.Mode == "Name" then
        local text = Drawing.new("Text")
        text.Text = player.Name
        text.Position = Vector2.new(pos.X, pos.Y)
        text.Size = 16
        text.Color = ESP.Color
        text.Center = true
        text.Outline = true
        text.Visible = true
        table.insert(drawings, text)

    elseif ESP.Mode == "Box" then
        local box = Drawing.new("Square")
        box.Size = Vector2.new(60, 80)
        box.Position = Vector2.new(pos.X - 30, pos.Y - 40)
        box.Color = ESP.Color
        box.Thickness = 2
        box.Filled = false
        box.Visible = true
        table.insert(drawings, box)

    elseif ESP.Mode == "Bones" then
        local function drawLine(fromPart, toPart)
            if char:FindFirstChild(fromPart) and char:FindFirstChild(toPart) then
                local from = Camera:WorldToViewportPoint(char[fromPart].Position)
                local to = Camera:WorldToViewportPoint(char[toPart].Position)
                local line = Drawing.new("Line")
                line.From = Vector2.new(from.X, from.Y)
                line.To = Vector2.new(to.X, to.Y)
                line.Color = ESP.Color
                line.Thickness = 1.5
                line.Visible = true
                table.insert(drawings, line)
            end
        end
        drawLine("Head", "UpperTorso")
        drawLine("UpperTorso", "LowerTorso")
        drawLine("UpperTorso", "LeftUpperArm")
        drawLine("LeftUpperArm", "LeftLowerArm")
        drawLine("LeftLowerArm", "LeftHand")
        drawLine("UpperTorso", "RightUpperArm")
        drawLine("RightUpperArm", "RightLowerArm")
        drawLine("RightLowerArm", "RightHand")
        drawLine("LowerTorso", "LeftUpperLeg")
        drawLine("LeftUpperLeg", "LeftLowerLeg")
        drawLine("LeftLowerLeg", "LeftFoot")
        drawLine("LowerTorso", "RightUpperLeg")
        drawLine("RightUpperLeg", "RightLowerLeg")
        drawLine("RightLowerLeg", "RightFoot")
    end
end

RunService.RenderStepped:Connect(function()
    clearDrawings()
    for _, player in pairs(Players:GetPlayers()) do
        drawESPForPlayer(player)
    end
end)

-- üõ∏ Auto Steal Logic
local function teleportToBase()
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        LocalPlayer.Character:MoveTo(basePosition)
        notify("Auto Steal: Teleported to base")
    end
end

local function monitorPickup()
    LocalPlayer.Backpack.ChildAdded:Connect(function(item)
        if AutoStealEnabled then teleportToBase() end
    end)
    LocalPlayer.Character.ChildAdded:Connect(function(item)
        if AutoStealEnabled and item:IsA("Tool") then teleportToBase() end
    end)
end
monitorPickup()

-- üß© GUI Buttons
createButton("üß† Toggle ESP", function()
    ESP.Enabled = not ESP.Enabled
    notify("ESP: " .. (ESP.Enabled and "Enabled" or "Disabled"))
end)

createButton("üîß Cycle ESP Mode", function()
    local modes = {"Name", "Box", "Bones"}
    local index = table.find(modes, ESP.Mode) or 1
    ESP.Mode = modes[index % #modes + 1]
    notify("ESP Mode: " .. ESP.Mode)
end)

createButton("üé® Change ESP Color", function()
    ESP.Color = Color3.fromRGB(math.random(100,255), math.random(100,255), math.random(100,255))
    notify("ESP Color changed")
end)

createButton("üõ∏ Toggle Auto Steal", function()
    AutoStealEnabled = not AutoStealEnabled
    notify("Auto Steal: " .. (AutoStealEnabled and "Enabled" or "Disabled"))
end)

createButton("‚ö° Speed Boost", function()
    local hum = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
    if hum then hum.WalkSpeed = 100 end
end)

createButton("üìç Teleport to Base", teleportToBase)

createButton("üì• Load External Script", function()
    local url = "https://raw.githubusercontent.com/yourusername/yourrepo/main/script.lua"
    loadstring(game:HttpGet(url))()
end)

createButton("üìâ FPS Boost", function()
    RunService:Set3dRenderingEnabled(false)
    notify("FPS Boost activated")
end)

createButton("üé® Toggle Theme", function()
    local isDark = Frame.BackgroundColor3 == Color3.fromRGB(30,30,30)
    Frame.BackgroundColor3 = isDark and Color3.fromRGB(240,240,240) or Color3.fromRGB(30,30,30)
end)

createButton("üßä Minimize GUI", function()
    Frame.Visible = false
    task.delay(10, function() Frame.Visible = true end)
end)

createButton("‚úÖ Hub Loaded", function()
    notify("Supreme Hub is ready to roll.")
end
